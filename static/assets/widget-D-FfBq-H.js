import{f as _,j as t,R as E,r as o,W as C,C as b}from"./ChatWidget-BPCuqi0d.js";function j({publicClientId:n}){const[e,u]=o.useState(null),[g,p]=o.useState(!0),[c,f]=o.useState("");if(o.useEffect(()=>{async function h(){try{const s=await fetch(`http://127.0.0.1:8001/client_settings?public_client_id=${n}`);if(!s.ok)throw new Error(`HTTP ${s.status}`);const r=await s.json();console.log("‚öôÔ∏è client_settings cargado:",r);const x=(r==null?void 0:r[0])||{};u(x)}catch(d){console.error("‚ùå Error cargando settings:",d),f("Error loading client settings")}finally{p(!1)}}h()},[n]),g)return t.jsx("p",{style:{color:"#888",textAlign:"center",marginTop:40},children:"Loading Evolvian Assistant..."});if(c)return t.jsx("p",{style:{color:"red",textAlign:"center",marginTop:40},children:c});const a=(e==null?void 0:e.require_email)||!1,m=(e==null?void 0:e.require_phone)||!1,l=(e==null?void 0:e.require_terms)||!1;return a||m||l?t.jsx(C,{publicClientId:n,requireEmailConsent:a,requireTermsConsent:l,clientSettings:e}):t.jsx(b,{clientId:n})}function w(){return new URLSearchParams(window.location.search).get("public_client_id")}const i=w();i?(console.log("üöÄ Evolvian Widget iniciado con publicClientId:",i),_.createRoot(document.getElementById("root")).render(t.jsx(E.StrictMode,{children:t.jsx(j,{publicClientId:i})}))):(console.error("‚ùå No se encontr√≥ public_client_id en la URL"),document.body.innerHTML="<p style='color:red;text-align:center;margin-top:50px;'>Missing public_client_id</p>");
